"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const midway_1 = require("midway");
exports.WEBSOCKETS_KEY = "WEBSOCKETS_CLASS";
exports.WebSocketKey = "websocket";
const PATH_METADATA = 'PATH_METADATA';
const METHOD_METADATA = 'METHOD_METADATA';
const ROUTER_NAME_METADATA = 'ROUTER_NAME_METADATA';
const ROUTER_MIDDLEWARE = 'ROUTER_MIDDLEWARE';
function websocket(path, routerOptions = { middleware: [] }) {
    return midway_1.RequestMapping({
        [PATH_METADATA]: path,
        [METHOD_METADATA]: "websocket",
        [ROUTER_NAME_METADATA]: routerOptions.routerName,
        [ROUTER_MIDDLEWARE]: routerOptions.middleware,
    });
}
exports.websocket = websocket;
;
function websockets(prefix, routerOptions = { middleware: [], sensitive: true }) {
    return (target) => {
        midway_1.saveModule(exports.WEBSOCKETS_KEY, target);
        midway_1.saveClassMetadata(exports.WEBSOCKETS_KEY, {
            prefix,
            routerOptions
        }, target);
        midway_1.scope(midway_1.ScopeEnum.Request)(target);
    };
}
exports.websockets = websockets;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdG9ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy93ZWJzb2NrZXQvZGVjb3JhdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1DQUFrSDtBQUVyRyxRQUFBLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQTtBQVNuQyxRQUFBLFlBQVksR0FBRyxXQUFXLENBQUE7QUFHdkMsTUFBTSxhQUFhLEdBQUcsZUFBZSxDQUFDO0FBQ3RDLE1BQU0sZUFBZSxHQUFHLGlCQUFpQixDQUFDO0FBQzFDLE1BQU0sb0JBQW9CLEdBQUcsc0JBQXNCLENBQUM7QUFDcEQsTUFBTSxpQkFBaUIsR0FBRyxtQkFBbUIsQ0FBQztBQUU5QyxTQUFnQixTQUFTLENBQ3ZCLElBQWEsRUFDYixnQkFHSSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUU7SUFFdEIsT0FBTyx1QkFBYyxDQUFDO1FBQ3BCLENBQUMsYUFBYSxDQUFDLEVBQUUsSUFBSTtRQUNyQixDQUFDLGVBQWUsQ0FBQyxFQUFFLFdBQVc7UUFDOUIsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxVQUFVO1FBQ2hELENBQUMsaUJBQWlCLENBQUMsRUFBRSxhQUFhLENBQUMsVUFBVTtLQUM5QyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBYkQsOEJBYUM7QUFBQSxDQUFDO0FBRUYsU0FBZ0IsVUFBVSxDQUN4QixNQUFjLEVBQ2QsZ0JBR0ksRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUU7SUFFdkMsT0FBTyxDQUFDLE1BQVcsRUFBRSxFQUFFO1FBQ3JCLG1CQUFVLENBQUMsc0JBQWMsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNuQywwQkFBaUIsQ0FBQyxzQkFBYyxFQUFFO1lBQ2hDLE1BQU07WUFDTixhQUFhO1NBQ00sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMvQixjQUFLLENBQUMsa0JBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuQyxDQUFDLENBQUM7QUFDSixDQUFDO0FBZkQsZ0NBZUMifQ==